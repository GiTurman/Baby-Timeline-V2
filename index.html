<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIDDO - AI áƒªáƒ®áƒáƒ•áƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒ˜áƒ’áƒœáƒ˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #fdf6e3; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; }
        .page-card { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.04); }
        .loader { border: 3px solid #f3f3f3; border-radius: 50%; border-top: 3px solid #ff8a8a; width: 24px; height: 24px; animation: spin 1s linear infinite; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="p-6 md:p-12">
    <div class="max-w-xl mx-auto">
        
        <div class="flex justify-between items-center mb-10">
            <div class="flex items-center gap-3">
                <div class="bg-orange-100 p-3 rounded-2xl text-3xl shadow-sm">ğŸ“–</div>
                <div>
                    <h1 class="text-3xl font-bold text-orange-900 tracking-tight">KIDDO</h1>
                    <p class="text-sm text-orange-600 font-medium">áƒªáƒ®áƒáƒ•áƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒ¬áƒ˜áƒ’áƒœáƒ˜ â€¢ Gemini 3</p>
                </div>
            </div>
            <button onclick="setApiKey()" class="text-xs font-bold bg-white px-3 py-2 rounded-full border border-orange-100 text-orange-400 hover:bg-orange-50 transition">
                ğŸ”‘ API KEY
            </button>
        </div>

        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-orange-900 mb-3">áƒ©áƒ•áƒ”áƒœáƒ˜ áƒ“áƒ˜áƒ“áƒ˜ áƒ—áƒáƒ•áƒ’áƒáƒ“áƒáƒ¡áƒáƒ•áƒáƒšáƒ˜</h2>
            <p class="text-orange-700 italic opacity-80 italic leading-relaxed">"áƒ§áƒáƒ•áƒ”áƒšáƒ˜ áƒ¬áƒáƒ›áƒ˜, áƒ áƒáƒ“áƒ”áƒ¡áƒáƒª áƒ¨áƒ”áƒœ áƒ©áƒ•áƒ”áƒœáƒ¡ áƒªáƒ®áƒáƒ•áƒ áƒ”áƒ‘áƒáƒ¨áƒ˜ áƒ’áƒáƒ©áƒœáƒ“áƒ˜, áƒªáƒáƒšáƒ™áƒ” áƒ˜áƒ¡áƒ¢áƒáƒ áƒ˜áƒ˜áƒ¡ áƒ¦áƒ˜áƒ áƒ¡áƒ˜áƒ..."</p>
        </div>

        <div class="page-card p-8 mb-12 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-pink-300 to-orange-300"></div>
            <textarea id="userNote" class="w-full border-none focus:ring-0 text-xl placeholder-orange-200 h-40 outline-none bg-transparent resize-none" placeholder="áƒáƒ¦áƒ¬áƒ”áƒ áƒ” áƒ”áƒ¡ áƒ¬áƒáƒ›áƒ˜ áƒ›áƒáƒ™áƒšáƒ”áƒ“..."></textarea>
            
            <div class="flex flex-col gap-5 mt-6">
                <button class="flex items-center gap-2 text-orange-800 font-semibold border border-orange-100 py-3 px-6 rounded-2xl w-max hover:bg-orange-50 transition shadow-sm bg-white">
                    ğŸ–¼ï¸ áƒ¤áƒáƒ¢áƒáƒ¡ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ
                </button>
                <button id="mainBtn" onclick="generateWithAI()" class="bg-gradient-to-r from-pink-400 to-orange-400 text-white font-bold py-5 rounded-2xl shadow-xl hover:scale-[1.01] active:scale-95 transition-all flex items-center justify-center gap-3">
                    <span id="btnText">áƒ©áƒáƒ¬áƒ”áƒ áƒ” áƒ¬áƒ˜áƒ’áƒœáƒ¨áƒ˜</span>
                    <div id="loader" class="loader"></div>
                </button>
            </div>
        </div>

        <div id="timeline" class="space-y-10">
            </div>
    </div>

    <script>
        function setApiKey() {
            const key = prompt("AIzaSyDm5B64HwQ43WtoNiPEWluf0lDY75918HY");
            if (key) {
                localStorage.setItem('gemini_key', key);
                alert("áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘áƒ˜ áƒ¨áƒ”áƒœáƒáƒ®áƒ£áƒšáƒ˜áƒ!");
            }
        }

        async function generateWithAI() {
            const note = document.getElementById('userNote').value;
            const apiKey = localStorage.getItem('gemini_key');
            const btnText = document.getElementById('btnText');
            const loader = document.getElementById('loader');

            if (!apiKey) {
                alert("áƒ’áƒ—áƒ®áƒáƒ•áƒ—, áƒ¯áƒ”áƒ  áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒáƒ— API Key (áƒ¦áƒ˜áƒšáƒáƒ™áƒ˜ áƒ–áƒ”áƒ“áƒ áƒ›áƒáƒ áƒ¯áƒ•áƒ”áƒœáƒ áƒ™áƒ£áƒ—áƒ®áƒ”áƒ¨áƒ˜)");
                return;
            }
            if (!note) {
                alert("áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ áƒáƒ›áƒ”, áƒ áƒáƒ› AI-áƒ› áƒ’áƒáƒáƒšáƒáƒ›áƒáƒ–áƒáƒ¡!");
                return;
            }

            // Loading state
            btnText.innerText = 'Gemini áƒ¤áƒ˜áƒ¥áƒ áƒáƒ‘áƒ¡...';
            loader.style.display = 'block';

            try {
                // áƒ›áƒ˜áƒ•áƒ›áƒáƒ áƒ—áƒáƒ•áƒ— Gemini 3 Flash-áƒ¡
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ 
                            parts: [{ 
                                text: `áƒ¨áƒ”áƒœ áƒ®áƒáƒ  áƒ”áƒ›áƒáƒªáƒ˜áƒ£áƒ áƒ˜ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒáƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒœáƒ¢áƒ˜. áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ’áƒ˜áƒ¬áƒ”áƒ áƒ¡ áƒ›áƒáƒ™áƒšáƒ” áƒ¤áƒ áƒáƒ–áƒáƒ¡ áƒ‘áƒáƒ•áƒ¨áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ®áƒ”áƒ‘. áƒ¨áƒ”áƒœáƒ˜ áƒáƒ›áƒáƒªáƒáƒœáƒáƒ, áƒ”áƒ¡ áƒ¤áƒ áƒáƒ–áƒ áƒ’áƒáƒ“áƒáƒáƒ¥áƒªáƒ˜áƒ áƒ—áƒ‘áƒ˜áƒš, áƒšáƒ˜áƒ¢áƒ”áƒ áƒáƒ¢áƒ£áƒ áƒ£áƒš áƒ“áƒ áƒ–áƒ¦áƒáƒáƒ áƒ£áƒš áƒ›áƒáƒ’áƒáƒœáƒ”áƒ‘áƒáƒ“ áƒ¥áƒáƒ áƒ—áƒ£áƒš áƒ”áƒœáƒáƒ–áƒ”. áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒ›áƒáƒ™áƒšáƒ” (2-3 áƒ¬áƒ˜áƒœáƒáƒ“áƒáƒ“áƒ”áƒ‘áƒ). áƒáƒ˜ áƒ¤áƒ áƒáƒ–áƒ: "${note}"` 
                            }] 
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) throw new Error(data.error.message);

                const aiStory = data.candidates[0].content.parts[0].text;
                addStoryToUI(note, aiStory);
                
                document.getElementById('userNote').value = '';
            } catch (error) {
                alert("áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ” API áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘áƒ˜ áƒáƒœ áƒ˜áƒœáƒ¢áƒ”áƒ áƒœáƒ”áƒ¢áƒ˜.");
                console.error(error);
            } finally {
                btnText.innerText = 'áƒ©áƒáƒ¬áƒ”áƒ áƒ” áƒ¬áƒ˜áƒ’áƒœáƒ¨áƒ˜';
                loader.style.display = 'none';
            }
        }

        function addStoryToUI(original, ai) {
            const timeline = document.getElementById('timeline');
            const date = new Date().toLocaleDateString('ka-GE', { day: 'numeric', month: 'long', year: 'numeric' });
            
            const html = `
                <div class="page-card p-8 border-l-8 border-pink-400 animate-fade-in transition-all">
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-orange-50 text-orange-600 text-xs font-bold px-3 py-1 rounded-full underline tracking-widest">${date}</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4 font-medium italic">"${original}"</p>
                    <p class="text-orange-950 leading-relaxed font-serif text-xl font-medium">${ai}</p>
                </div>
            `;
            timeline.insertAdjacentHTML('afterbegin', html);
        }
    </script>
</body>
</html>

